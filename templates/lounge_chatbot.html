<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Chatbot</title>
  {% load static %}
  <link rel="stylesheet" href="//fonts.googleapis.com/earlyaccess/nanummyeongjo.css">
  <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css"/>
  <link rel="stylesheet" href="{% static 'css/assistant/chatbot.css' %}"/>
</head>

<body data-assistant-img="{{ assistant.photo.url }}">
<div class="page-container">
  <!-- í—¤ë” -->
  <header class="menu-bar">
    <button id="menuButton" class="menu-logo-button">
      <a href="{% url 'lounge-select' %}">
        <img src="{% static 'image/assistant/lounge.png' %}" alt="Menu">
      </a>
    </button>
    <div class="menu-right">
      <button id="fastResponseButton" class="fast-response-button">
        <img src="{% static 'image/assistant/fast-response.png' %}" alt="ë¹ ë¥¸ ì‘ë‹µ">
        ë¹ ë¥¸ ì‘ë‹µ
      </button>
    </div>
  </header>

  <!-- ì±„íŒ… ë©”ì‹œì§€ ëª©ë¡ -->
  <div id="chatContainer" class="chat-container">
    <div id="messageList" class="message-list">
      <div class="message-container ai-message">
        <img src="{{ assistant.photo.url }}" alt="{{ assistant.name }}" class="profile-image"/>
        <div class="message-body">
          <div class="message-content">
            <p id="welcomeMessage">{{ assistant.welcome_message }}</p>
            <div class="actions-wrapper"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ì…ë ¥ì°½ -->
  <div class="input-container">
    <!-- ì§ˆë¬¸ ë²„ë¸” ìŠ¬ë¼ì´ë” -->
    <div class="question-slider swiper-container">
      <div class="swiper-wrapper">
        {% for q in questions %}
          <div class="swiper-slide">{{ q }}</div>
        {% endfor %}
      </div>
    </div>

    <!-- ì…ë ¥ì°½ -->
    <div class="input-wrapper" id="inputWrapper">
      <input id="messageInput" type="text" placeholder="ë¬´ì—‡ì´ë“  ë¬¼ì–´ë³´ì„¸ìš”...">
      <input type="hidden" id="assistant_db_id" value="{{ assistant.id }}">
      <input type="hidden" id="assistant_id" value="{{ assistant_id }}">
      <input type="hidden" id="document_id" value="{{ document_id }}">
      <input type="hidden" id="voice" value="{{ assistant.voice }}">
      <button id="sendButton" class="send-button">
        <img src="{% static 'image/assistant/message-send.svg' %}" alt="Send">
      </button>
      <button id="sendTts" class="send-button" type="button">
        <img src="{% static 'image/assistant/mic.png' %}" alt="Voice">
      </button>
    </div>
  </div>

  <!-- ìŒì„± UI -->
  <div id="voiceUi" class="voice-ui hidden">
    ğŸ™ ë“£ëŠ” ì¤‘...
    <div class="waveform">
      <div class="bar"></div>
      <div class="bar"></div>
      <div class="bar"></div>
      <div class="bar"></div>
    </div>
    <button id="cancelMic" class="cancel-button">ì·¨ì†Œ</button>
  </div>
</div>

<!-- ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- Static ì´ë¯¸ì§€ JS ë³€ìˆ˜í™” -->
<script>
  const likeImgUrl = "{% static 'image/assistant/like.svg' %}";
  const unlikeImgUrl = "{% static 'image/assistant/unlike.svg' %}";
  const copyImgUrl = "{% static 'image/assistant/copy.svg' %}";
</script>

<!-- ì±—ë´‡ ë¡œì§ -->
<script src="{% static 'js/assistant/chatbot.js' %}"></script>
</body>
</html>