{% load static %}
{% load i18n %}

<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE|default:'ko' }}">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{% trans "라운지" %}</title>
    
  {% load static %}
  <link rel="stylesheet" href="//fonts.googleapis.com/earlyaccess/nanummyeongjo.css">
  <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
  <link rel="stylesheet" href="{% static 'css/assistant/main.css' %}">
  <link rel="stylesheet" href="{% static 'css/includes/header.css' %}">
  <link rel="stylesheet" href="{% static 'css/includes/search_bar.css' %}">

</head>

<body>
<div class="page-container">
  <!-- 공통 헤더 불러오기 -->
    {% include "includes/header.html" %}

  <!-- 검색창 -->
  {% include "includes/search_bar.html" %}


  <!-- 어시스턴트 슬라이드 -->
  {% for description, assistants in assistants_by_description.items %}
    <p class="assistant-container-title">{{ description }}</p>
    <div class="assistant-container">
      <div class="swiper-container">
        <div class="swiper-wrapper">
          {% for assistant in assistants %}
            <div class="swiper-slide assistant-item">
              <a href="/lounge_chatbot/{{ assistant.id }}/" onclick="setArrayIndex(2)" class="chatbot-link">
                <img src="{% if assistant.photo %}{{ assistant.photo.url }}{% else %}{{ MEDIA_URL }}assistnat_photos/default.png{% endif %}" alt="{{ assistant.name }}">
                <p class="assistant-title">{{ assistant.name }}</p>
                <p class="assistant-address">
                  {% for tag in assistant.tags.all|dictsort:"priority" %}
                    #{{ tag.name }}
                  {% endfor %}
                </p>
              </a>
            </div>
          {% endfor %}
        </div>
        <div class="swiper-scrollbar"></div>
      </div>
    </div>
  {% endfor %}
</div>

<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
<!--<script src="{% static 'js/includes/header.js' %}"></script>-->
<!--<script src="{% static 'js/setting/setting.js' %}"></script>-->
<script>
  document.querySelectorAll('.swiper-container').forEach(container => {
    new Swiper(container, {
      loop: false,
      slidesPerView: 1.9,
      spaceBetween: 2,
      scrollbar: {
        el: container.querySelector('.swiper-scrollbar'),
        draggable: true,
      },
    });
  });

  function setArrayIndex(index) {
    sessionStorage.setItem('arrayIndex', index);
  }
</script>
</body>
</html>