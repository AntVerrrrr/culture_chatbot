{% load static %}
{% load i18n %}

<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE|default:'ko' }}">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>{% trans "ì±„íŒ…" %}</title>
    <link rel="stylesheet" href="//fonts.googleapis.com/earlyaccess/nanummyeongjo.css">
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css"/>
    <link rel="stylesheet" href="{% static 'css/assistant/chatbot.css' %}"/>
</head>

<body data-assistant-img="{{ assistant.photo.url }}">
<div class="page-container">
    <!-- í—¤ë” -->
    <header class="menu-bar">
        <button id="menuButton" class="menu-logo-button">
            <a href="{% url 'main-select' %}">
                <img src="{% static 'image/assistant/newlogo.png' %}" alt="Menu">
            </a>
        </button>
        <div class="menu-right">
            <button id="fileSearchButton" class="fileSearch-button">
                <img src="{% static 'image/assistant/fileSearch.png' %}" alt="FileSearch">
                <span>{% trans "íë ˆì´ì…˜" %}</span>
            </button>
        </div>
    </header>

    <!-- ì±„íŒ… ë©”ì‹œì§€ ëª©ë¡ -->
    <div id="chatContainer" class="chat-container">
        <div id="messageList" class="message-list">
            <div class="message-container ai-message">
                <img src="{{ assistant.photo.url }}" alt="{{ assistant.name }}" class="profile-image"/>
                <div class="message-body">
                    <div class="message-content">
                        <p id="welcomeMessage">{{ assistant.welcome_message }}</p>

                        <div class="actions-wrapper">
                            <!--                            {#                <hr class="msg-hr">#}-->
                            <!--                            {#                <div class="message-actions">#}-->
                            <!--                            {#                  <button class="action-button like-btn" data-like-img="{% static 'image/assistant/like.svg' %}">#}-->
                            <!--                            {#                    <img src="{% static 'image/assistant/like.svg' %}" alt="ì¢‹ì•„ìš”">#}-->
                            <!--                            {#                  </button>#}-->
                            <!--                            {#                  <button class="action-button unlike-btn" data-unlike-img="{% static 'image/assistant/unlike.svg' %}">#}-->
                            <!--                            {#                    <img src="{% static 'image/assistant/unlike.svg' %}" alt="ì‹«ì–´ìš”">#}-->
                            <!--                            {#                  </button>#}-->
                            <!--                            {#                  <button class="action-button action-button-cp copy-btn"#}-->
                            <!--                            {#                    data-copy-img="{% static 'image/assistant/copy.svg' %}" onclick="handleCopy(this)">#}-->
                            <!--                            {#                    <img src="{% static 'image/assistant/copy.svg' %}" alt="ë³µì‚¬">#}-->
                            <!--                            {#                  </button>#}-->
                            <!--                            {#                </div>#}-->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- ì…ë ¥ì°½ -->
    <div class="input-container">
        <!-- ì§ˆë¬¸ ë²„ë¸” ìŠ¬ë¼ì´ë” -->
        <div class="question-slider swiper-container">
            <div class="swiper-wrapper">
                {% for q in questions %}
                <div class="swiper-slide">{{ q }}</div>
                {% endfor %}
            </div>
        </div>

        <!-- ì…ë ¥ì°½ -->
        <div class="input-wrapper" id="inputWrapper">
            <input id="messageInput" type="text" placeholder="{% trans 'ë¬´ì—‡ì´ë“  ë¬¼ì–´ë³´ì„¸ìš”...' %}">
            <input type="hidden" id="assistant_db_id" value="{{ assistant.id }}">
            <input type="hidden" id="assistant_id" value="{{ assistant_id }}">
            <input type="hidden" id="document_id" value="{{ document_id }}">
            <input type="hidden" id="voice" value="{{ assistant.voice }}">
            <button id="sendButton" class="send-button">
                <img src="{% static 'image/assistant/message-send.svg' %}" alt="Send">
            </button>
            <button id="sendTts" class="send-button" type="button">
                <img src="{% static 'image/assistant/mic.png' %}" alt="VoiceInput">
            </button>
        </div>
    </div>

    <!-- âœ… ìŒì„± UIëŠ” body ë°”ë¡œ ì•„ë˜ ìœ„ì¹˜ -->
    <div id="voiceUi" class="voice-ui hidden">
        <span aria-live="polite">ğŸ™ {% trans "ë“£ëŠ” ì¤‘..." %}</span>
        <div class="waveform">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </div>
        <button id="cancelMic" class="cancel-button">{% trans "ì·¨ì†Œ" %}</button>
    </div>
</div>

<!-- ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- Static ì´ë¯¸ì§€ JS ë³€ìˆ˜í™” -->
<script>
    const likeImgUrl = "{% static 'image/assistant/like.svg' %}";
    const unlikeImgUrl = "{% static 'image/assistant/unlike.svg' %}";
    const copyImgUrl = "{% static 'image/assistant/copy.svg' %}";
</script>

<!-- ì±—ë´‡ ë¡œì§ ìŠ¤í¬ë¦½íŠ¸ -->
<script type="module" src="{% static 'js/assistant/chatbot/main.js' %}"></script>
<!--<script src="{% static 'js/assistant/chatbot.js' %}"></script>-->
</body>
</html>