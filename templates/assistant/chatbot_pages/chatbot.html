<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Chatbot</title>
    {% load static %}

    <link rel="stylesheet" href="//fonts.googleapis.com/earlyaccess/nanummyeongjo.css">
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css"/>
    <link rel="stylesheet" href="{% static 'css/assistant/chatbot.css' %}"/>
</head>

<body data-assistant-img="{{ assistant.photo.url }}">
<div class="page-container">
    <!-- Ìó§Îçî -->
    <header class="menu-bar">
        <button id="menuButton" class="menu-logo-button">
            <a href="{% url 'main-select' %}">
                <img src="{% static 'image/assistant/newlogo.png' %}" alt="Menu">
            </a>
        </button>
        <div class="menu-right">
            <button id="fastResponseButton" class="fast-response-button">
              <img src="{% static 'image/assistant/fast-response.png' %}" alt="Îπ†Î•∏ ÏùëÎãµ">
              <span data-i18n="Îπ†Î•∏ ÏùëÎãµ">Îπ†Î•∏ ÏùëÎãµ</span>
            </button>
        </div>
    </header>

    <!-- Ï±ÑÌåÖ Î©îÏãúÏßÄ Î™©Î°ù -->
    <div id="chatContainer" class="chat-container">
        <div id="messageList" class="message-list">
            <div class="message-container ai-message">
                <img src="{{ assistant.photo.url }}" alt="{{ assistant.name }}" class="profile-image"/>
                <div class="message-body">
                    <div class="message-content">
                        <p id="welcomeMessage">{{ assistant.welcome_message }}</p>

                        <div class="actions-wrapper">
                            {#                <hr class="msg-hr">#}
                            {#                <div class="message-actions">#}
                            {#                  <button class="action-button like-btn" data-like-img="{% static 'image/assistant/like.svg' %}">#}
                            {#                    <img src="{% static 'image/assistant/like.svg' %}" alt="Ï¢ãÏïÑÏöî">#}
                            {#                  </button>#}
                            {#                  <button class="action-button unlike-btn" data-unlike-img="{% static 'image/assistant/unlike.svg' %}">#}
                            {#                    <img src="{% static 'image/assistant/unlike.svg' %}" alt="Ïã´Ïñ¥Ïöî">#}
                            {#                  </button>#}
                            {#                  <button class="action-button action-button-cp copy-btn"#}
                            {#                    data-copy-img="{% static 'image/assistant/copy.svg' %}" onclick="handleCopy(this)">#}
                            {#                    <img src="{% static 'image/assistant/copy.svg' %}" alt="Î≥µÏÇ¨">#}
                            {#                  </button>#}
                            {#                </div>#}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- ÏûÖÎ†•Ï∞Ω -->
    <div class="input-container">
        <!-- ÏßàÎ¨∏ Î≤ÑÎ∏î Ïä¨ÎùºÏù¥Îçî -->
        <div class="question-slider swiper-container">
            <div class="swiper-wrapper">
                {% for q in questions %}
                    <div class="swiper-slide">{{ q }}</div>
                {% endfor %}
            </div>
        </div>

        <!-- ÏûÖÎ†•Ï∞Ω -->
        <div class="input-wrapper" id="inputWrapper">
            <input id="messageInput" type="text" placeholder="Î¨¥ÏóáÏù¥Îì† Î¨ºÏñ¥Î≥¥ÏÑ∏Ïöî...">
            <input type="hidden" id="assistant_db_id" value="{{ assistant.id }}">
            <input type="hidden" id="assistant_id" value="{{ assistant_id }}">
            <input type="hidden" id="document_id" value="{{ document_id }}">
            <input type="hidden" id="voice" value="{{ assistant.voice }}">
            <button id="sendButton" class="send-button">
                <img src="{% static 'image/assistant/message-send.svg' %}" alt="Send">
            </button>
            <button id="sendTts" class="send-button" type="button">
                <img src="{% static 'image/assistant/mic.png' %}" alt="Voice">
            </button>
        </div>
    </div>

    <!-- ‚úÖ ÏùåÏÑ± UIÎäî body Î∞îÎ°ú ÏïÑÎûò ÏúÑÏπò -->
    <div id="voiceUi" class="voice-ui hidden">
        üéô Îì£Îäî Ï§ë...
        <div class="waveform">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </div>
        <button id="cancelMic" class="cancel-button">Ï∑®ÏÜå</button>
    </div>
</div>

<!-- Ïô∏Î∂Ä ÎùºÏù¥Î∏åÎü¨Î¶¨ -->
<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- Static Ïù¥ÎØ∏ÏßÄ JS Î≥ÄÏàòÌôî -->
<script>
    const likeImgUrl = "{% static 'image/assistant/like.svg' %}";
    const unlikeImgUrl = "{% static 'image/assistant/unlike.svg' %}";
    const copyImgUrl = "{% static 'image/assistant/copy.svg' %}";
</script>

<!-- Ï±óÎ¥á Î°úÏßÅ Ïä§ÌÅ¨Î¶ΩÌä∏ -->
<script src="{% static 'js/assistant/chatbot.js' %}"></script>
<script src="{% static 'js/setting/setting.js' %}"></script>
</body>
</html>